<script>

const getPromiseList = function() {
    return new Promise(resolve => {
        const list = []
        let cache = new Set()

        let timer = setInterval(function() {
            if (list.length < 4) {
                let curNum
                while(cache.has(curNum) || curNum == undefined) {
                    curNum = getRandomNum()
                    
                }
                cache.add(curNum)
                list.push(curNum)
                console.log(curNum, list)
            } else {
                clearInterval(timer)
                resolve(list)
            }
            
        }, 2 * 1000)
    })
}

function getList() {
    
        
    return list
}

function getRandomNum() {
    return Math.floor(Math.random(0, 1) * 8999 + 1000)
}


(async function() {
    const result = await getPromiseList();
    console.log(result, '=========')
})()
</script>